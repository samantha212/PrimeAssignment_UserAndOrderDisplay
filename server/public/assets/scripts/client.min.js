var app=angular.module("orderApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/addresses",{templateUrl:"views/addresses.html",controller:"AddressesController"}).when("/orders",{templateUrl:"views/orders.html",controller:"OrdersController"}),b.html5Mode({enabled:!0,requireBase:!1})}]),app.controller("AddressesController",["$scope","getAddresses",function(a,b){}]),app.controller("OrdersController",["$scope","getOrders",function(a,b){}]),app.controller("mainController",["$scope","$http","getAddresses","getOrders",function(a,b,c,d){a.users=[];a.displayAddresses=[],a.getUserAddresses=c.getUserAddresses,a.data=c.data,a.orderData=d.orderData,a.getSpecificOrders=d.getSpecificOrders,angular.element(document).ready(function(){b.get("/users").then(function(b){a.users=b.data,console.log(a.users),c.createAddressesObject(),d.getOrders()})})}]),app.factory("getAddresses",["$http",function(a){var b={allAddressArray:[],results:[]},c=function(){a.get("/getuseraddresses").then(function(a){b.allAddressArray=a.data})},d=function(a){for(var c=a,d=[],e=b.allAddressArray,f=0;f<e.length;f++){var g=e[f];g.user_id==c&&d.push(g)}b.results=d};return{createAddressesObject:c,getUserAddresses:d,data:b}}]),app.factory("getOrders",["$http",function(a){function b(a){var b=a.slice(0,4),c=a.slice(5,7),d=a.slice(8,10);return b+"-"+c+"-"+d}function c(a){var b=a,c=b.slice(0,2),d=a.slice(3,5),e=a.slice(6,10);return e+"-"+c+"-"+d}var d={allOrdersArray:[],results:[],dollarTotal:0},e=function(){a.get("/getuserorders").then(function(a){d.allOrdersArray=a.data,console.log(allOrdersArray)})},f=function(a,e,f){for(var g=a,h=[],i=d.allOrdersArray,j=c(e),k=c(f),l=0;l<i.length;l++){var m=i[l];if(m.user_id==g){var n=b(m.order_date);n>j&&k>n&&(thisOrderTotal=m.amount,orderCost=parseFloat(m.amount),d.dollarTotal+=orderCost,h.push(m))}}d.results=h};return{getOrders:e,getSpecificOrders:f,orderData:d}}]);